{% extends "base.html" %}

{% load static %}

{% block extra_styles %}
    <link rel="stylesheet" href="{% static 'product.css' %}">
{% endblock %}

{% block content %}
<div class="product-container">
    <section class="product-row">
        <!-- 搜索區，位於導航列下面 -->
        <div class="product-search-container">
            <div class="product-search-bar">
                <form method="GET" action="{% url 'search' %}">
                    <input type="text" name="q" class="product-form-control" placeholder="搜尋商品" aria-label="搜尋商品">
                    <button class="product-btn" type="submit" aria-label="搜尋">
                        <img src="{% static '放大鏡.png' %}" alt="搜尋圖示" width="20" height="20">
                    </button>
                </form>
            </div>
            <div class="product-search-tag">
                <p class="product-search-label">熱門搜尋</p>
                <div class="product-tags">
                    <a href="{% url 'search' %}?q=筆電" class="product-tag">筆電</a>
                    <a href="{% url 'search' %}?q=手機" class="product-tag">手機</a>
                    <a href="{% url 'search' %}?q=電腦" class="product-tag">電腦</a>
                    <a href="{% url 'search' %}?q=相機" class="product-tag">相機</a>
                </div>
            </div>
        </div>
    </section>

    <section class="product-content-container">
        <div class="product-row">
            <aside class="product-sidebar">
                <h1>商品分類</h1>
                <ul class="product-list-unstyled">
                    <li class="product-category">分類範例</li>
                </ul>
            </aside>

            <main class="product-content">
                <div class="product-image-container">
                    <img src="{{ product.image_url }}" alt="{{ product.name }}" class="product-img">
                    <div class="product-details">
                        <h2>{{ product.name }}</h2>
                        <p class="product-price">$ {{ product.price }}</p>
                    </div>
                    <div class="follow-btn-container">
                        <button class="follow-btn">關注商品</button>
                    </div>
                </div>
                <section class="store-pricing">
                    <h3>店家價格</h3>
                    <div class="store-list">
                        <div class="store-item">
                            <span class="rank">1</span>
                            <img src="{% if product.store.id == '1' %}{% static '家樂福LOGO.jpg' %}{% elif product.store.id == '2' %}{% static 'COSTCO.png' %}{% endif %}" alt="{{ product.store.name }} LOGO" class="store-logo">
                            <span class="product-name">{{ product.name }}</span>
                            <span class="product-price">NT$ {{ product.price }}</span>
                            <a href="{{ product.product_url }}" target="_blank" class="buy-btn">購買</a>
                        </div>
                    </div>
                </section>
            </main>

            <aside class="related-products">
                <h3>搜尋的其他物品</h3>
                <div class="product-list">
                    {% for related in related_products %}
                        <div class="product-item">
                            <a href="{% url 'product' related.id %}" class="product-link">
                                <img src="{{ related.image_url }}" alt="{{ related.name }}">
                                <div class="product-info">
                                    <span class="product-name">{{ related.name }}</span>
                                    <span class="product-price">$ {{ related.price }}</span>
                                </div>
                            </a>
                        </div>
                    {% endfor %}
                </div>
            </aside>
        </div>
    </section>
</div>
{% endblock %}